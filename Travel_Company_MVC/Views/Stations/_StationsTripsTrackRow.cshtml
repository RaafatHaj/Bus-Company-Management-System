@model StationTrackDTO;

@{

	var departureTimeColorAndSize = "";
	var arrivalTimeColorAndSize = "";
	var departureDayColor = "text-primary";
	var arrivalDayColor = "text-primary";

	if(Model.Status== StationStatus.Pending)
	{
		arrivalTimeColorAndSize = "text-gray-900 fs-1";
		departureTimeColorAndSize = "text-gray-900 fs-1";


	}
	else if (Model.Status == StationStatus.Arrived)
	{
		arrivalTimeColorAndSize = "text-muted fs-3";
		departureTimeColorAndSize = "text-gray-900 fs-1";


		departureDayColor = "text-muted";

	}
	else if (Model.Status == StationStatus.Moved)
	{
		arrivalTimeColorAndSize = "text-muted fs-3";
		departureTimeColorAndSize = "text-gray-700 fs-3";


		departureDayColor = "text-muted";
		arrivalDayColor = "text-muted";
	}
}
<tr>
	<td>

	
			@if(Model.PreviousStation is not null)
{
			<div class="d-flex gap-2 align-items-start">
				<div class="m-0 d-flex">


					<i class="ki-duotone fw-semibold  ki-black-down   fs-1 mt-1 ">  </i>

					<div>

						<div class="">

							<span class="@arrivalTimeColorAndSize fw-bold d-block ">
								@Model.ArrivalDateTime.ToString("HH:mm")
								<span class="text-muted fw-semibold fs-7">
									@(Model.ArrivalDateTime.TimeOfDay > new TimeSpan(12, 0, 0) ? "Pm" : "Am")
								</span>
								<span class="@departureDayColor fw-normal  fs-6  ">@Model.ArrivalDateTime.ToString("ddd")</span>
							</span>



						</div>

						<div class="text-muted fw-semibold fs-7 ">
							<span class="@departureDayColor">
								@Model.ArrivalDateTime.ToString("dd")
							</span>
							@Model.ArrivalDateTime.ToString("MMM")
							@Model.ArrivalDateTime.ToString("yyyy").
						</div>
					</div>



				</div></div>
			}
			else
			{
				<div class=" d-flex justify-content-start  ">
				<span class="text-muted ms-7">
					First Station
				</span>
				</div>


			}
		





	</td>
	<td >
	
			@if(Model.NexttStation is not null)
			{
			<div class="d-flex gap-2 align-items-start">
				<div class="m-0 d-flex">


					<i class="ki-duotone fw-semibold  ki-black-up   fs-1 mt-2">  </i>

					<div>

						<div class="">

							<span class="@departureTimeColorAndSize fw-bold d-block ">
								@Model.DepartureDateTime.ToString("HH:mm")
								<span class="text-muted fw-semibold fs-7">
									@(Model.DepartureDateTime.TimeOfDay > new TimeSpan(12, 0, 0) ? "Pm" : "Am")
								</span>
								<span class="@arrivalDayColor fw-normal  fs-5 ">@Model.DepartureDateTime.ToString("ddd")</span>

							</span>


						</div>

						<div class="text-muted fw-semibold fs-7 ">
							<span class="@arrivalDayColor">
								@Model.DepartureDateTime.ToString("dd")
							</span>
							@Model.DepartureDateTime.ToString("MMM")
							@Model.DepartureDateTime.ToString("yyyy").
						</div>
					</div>



				</div>
				</div>
			}
			else
			{
				<div class="d-flex justify-content-start">
				<span class="text-muted ms-7">Last Station</span>
					
					</div>
			}
			


	</td>
	<td>

		@{
			string statusColor = "";
			if (Model.Status == StationStatus.Moved)
				statusColor = "badge-light-danger";
			else if (Model.Status == StationStatus.Pending)
				statusColor = "badge-light-warning";
			else if (Model.Status == StationStatus.Arrived)
				statusColor = "badge-light-primary";

		}

		<div class=" badge   @statusColor  ">@Model.Status</div>

	</td>

	<td class="text-nowrap">

		<div class="d-flex flex-column">
		@if(Model.StationBoarding==0)
		{
			<span class="text-muted">No Boarding</span>
				@* <span class="@(Model.StationBoarding==0?"text-muted":"text-gray-900 text-hover-primary") ">Boarding</span>
				 <span class="@(Model.StationBoarding==0?"text-muted":"text-primary")  fw-bold">@Model.StationBoarding</span>*@
		}
		else
			{
				<a href="#" class="js-render-modal"
				   data-url="/Booking/GetStationPassengersBoarding?tripId=@Model.TripId&stationId=@Model.StationId"
				   data-title="Station Boarding"
				   data-has-table="true"
				   data-table-id="boarding-table"
				   data-sub-title="Passengers scheduled to board at this station."
				   data-middle-modal="true">

					<span class="@(Model.StationBoarding==0?"text-muted":"text-gray-900 text-hover-primary") ">Boarding</span>
					<span class="@(Model.StationBoarding==0?"text-muted":"text-primary")  fw-bold">@Model.StationBoarding</span>
				</a>
			}
		
			<a href="#" class="js-render-modal" data-url="/Trips/GetTripTrack?tripId=@Model.TripId"
			   data-title="Trip Tracking"
			   data-sub-title="Track where the trip is now and which stations are next."
			   data-middle-modal="true">
				<span class="text-primary text-hover-primary">Tracking.</span>
			</a>


		</div>

	</td>


	<td>
		@{
			if(Model.PreviousStation is null)
			{
				<div class="text-muted fw-semibold fs-7 ">
					No Previous
				</div>

			}
			else
			{
				<div>

					<div class="text-gray-900 fw-bold ">
						@Model.PreviousStation

					</div>

					<div class="text-muted fw-semibold fs-7 ">
						Previous
					</div>
				</div>

			}
		}
	


	</td>
	<td>

		@{

			if(Model.NexttStation is null)
			{
				<div class="text-muted fw-semibold fs-7 ">
					No Next
				</div>
			}
			else
			{
				<div>

					<div class="text-gray-900 fw-bold ">
						@Model.NexttStation

					</div>

					<div class="text-muted fw-semibold fs-7 ">
						Next
					</div>
				</div>
			}
		}


	</td>
	<td>

		<div>

			<div class="text-gray-900 fw-bold ">
				@Model.RouteName

			</div>

			<div class="text-muted fw-semibold fs-7 ">
				 @Model.EstimatedDistance km 
				
			</div>
		</div>

	</td>
	<td>

		@{
			string color = "";
			if (Model.TripStatus == TripStatus.Unassigned)
				color = "badge-light";
			else if (Model.TripStatus == TripStatus.Pending)
				color = "badge-light-warning";
			else if (Model.TripStatus == TripStatus.Active)
				color = "badge-light-primary";
			else if (Model.TripStatus == TripStatus.Canseled)
				color = "badge-light-danger";
			else if (Model.TripStatus == TripStatus.Complete)
				color = "badge-light-success";

		}


		<div class=" badge  @color ">@Model.TripStatus</div>
		<div class="text-muted fw-semibold fs-7 ms-2">
			Trip
		</div>

	</td>


	<td>

		<a href="#" class="btn btn-sm btn-light btn-flex btn-center btn-active-light-primary" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end">
			Actions
			<i class="ki-duotone ki-down fs-5 ms-1"></i>
		</a>
		<!--begin::Menu-->
		<div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-semibold fs-7 w-150px py-4" data-kt-menu="true" style="">

			<!--begin::Menu item-->
			<div class="menu-item px-3">
				<a href="#" class="menu-link px-3 js-ajax-request"
				   data-url="/Stations/MarkStationAsArrived?tripId=@Model.TripId&stationId=@Model.StationId&stationOrder=@Model.StationOrder"
				   data-message="Are you sure that the trip is Arrived"
				   data-title="Confirm Arriving"
				   data-updete-table="true"
				   data-callback="UpdateTrackingRow">Mark As Arrived</a>
			</div>
			<!--end::Menu item-->
			<!--begin::Menu item-->
			<div class="menu-item px-3">
				<a href="#" class="menu-link px-3 js-ajax-request"
				   data-url="/Stations/MarkStationAsMoved?tripId=@Model.TripId&stationId=@Model.StationId&stationOrder=@Model.StationOrder"
				   data-message="Are you sure that the trip is Moved"
				   data-title="Confirm Moving"
				   data-updete-table="true"
				   data-callback="UpdateTrackingRow">Mark As Moved</a>
			</div>
			<!--end::Menu item-->
			<!--begin::Menu item-->
			<div class="menu-item px-3">
				<a href="#" class="menu-link px-3 js-render-modal"
				   data-url="/Trips/GetTripTrack?tripId=@Model.TripId"
				   data-title="Trip Tracking"
				   data-sub-title="Track where the trip is now and which stations are next.">Trip Tracking</a>
			</div>
			<!--end::Menu item-->
			<!--begin::Menu item-->
			<div class="menu-item px-3">
				<a href="#" class="menu-link px-3 js-render-modal"
				   data-url="/Booking/GetStationPassengersBoarding?tripId=@Model.TripId&stationId=@Model.StationId"
				   data-title="Station Boarding"
				   data-has-table="true"
				   data-table-id="boarding-table"
				   data-sub-title="Passengers scheduled to board at this station."
				   data-middle-modal="true">Boarding</a>
			</div>
			<!--end::Menu item-->
			<!--begin::Menu item-->
			<div class="menu-item px-3">
				<a href="#" class="menu-link px-3 js-render-modal"
				   data-url="/Booking/GetAllTripBookings?tripId=@Model.TripId"
				   data-has-table="true"
				   data-table-id="trip-reservations"
				   data-title="Trip Bookings"
				   data-sub-title="Complete list of reservations for the selected trip."
				   data-large-modal="true">Bookings</a>
			</div>
			<!--end::Menu item-->

		</div>
		<!--end::Menu-->


	</td>
</tr>



