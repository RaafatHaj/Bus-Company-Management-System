@using Newtonsoft.Json
@model AvailableVehiclesViewModel

@{
	TempData["TripId"] = Model.TripId;
}

	<div id="PageContainer" class="W-100">



	<div class="separator separator-dashed mt-5 mb-10"></div>


	<div class="d-flex align-items-start  gap-3">

		<div class=" scroll-y h-500px w-100 ">


			<table class="table table-row-dashed table-row-gray-300 align-middle W-100 gs-0 gy-4">
				<thead>
					<tr class="fw-bold fs-6 text-gray-800 px-7">
						<th>Vehcle</th>
						<th></th>
						<th>Availability Space</th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>

					</tr>
				</thead>
				<tbody>

				
				
@* 
					@foreach (var vehicle in Model.Vehicles)
					{ *@
					@{
						var list = Model.Vehicles.ToList();
					}
					@for (int i = 0; i < list.Count; i++)
					{

						if (i!=0 && list[i].VehicleId == list[i - 1].VehicleId)
						{
							list[i].fleg = true;

						}

						if(i==list.Count-1 || list[i].VehicleId !=list[i+1].VehicleId)
						{
							list[i].fleg2 = true;
							
						}
					

						
						<partial name="~/Views/Vehicles/_AvailableVehiclesRow.cshtml" model="@list[i]" />



					}



				</tbody>
			</table>



		</div>


		

			<div class="card card-xl-stretch mb-xl-8 sticky-card scroll-y  w-400px" id="route-details-card">



			<div class=" ms-5 mb-5">

				<div class="text-gray-900 fw-bold  fs-6 mb-7 mt-6">
					Trip Detials :

				</div>
				
				<div class="text-gray-900 fw-bold  fs-4">
					
						<span class="text-gray-600 fw-bold fs-7 ">
							- Time :
						</span>
						@Model.TripDateTime.ToString("HH:mm")
					<span class="text-muted fw-semibold fs-7">@(Model.TripDateTime.TimeOfDay > new TimeSpan(12, 0, 0) ? "Pm" : "Am")</span>



				</div>
			
				<div class="text-gray-900 fw-bold  fs-4">
				
						<span class="text-gray-600 fw-bold fs-7 ">
							- Date :

						<span class="text-primary">@Model.TripDateTime.ToString("ddd")</span> ,
							<span class="text-primary">
							@Model.TripDateTime.ToString("dd")
							</span>
						@Model.TripDateTime.ToString("MMM")
						@Model.TripDateTime.ToString("yyyy").
						</span>
					

					</div>

			

			
				<div class="d-flex gap-2 mt-3 mb-3">

					<span class="d-flex flex-column  text-gray-900 fw-bold  fs-6">
						<span class="text-gray-600 fw-bold fs-6 ">
							- Departure Station :
						</span>
						<span class="">
							- @Model.FirstStation

						</span>
					</span>


				</div>
				<div class="d-flex gap-2 mb-4">

					<span class="d-flex flex-column text-gray-900 fw-bold  fs-6">
						<span class="text-gray-600 fw-bold fs-6 ">
							- Arrived Station :
						</span>
						<span class="">
							- @Model.LastStation
						</span>
					</span>


				</div>
				<div class="d-flex gap-2 mb-10">

					<span class="text-gray-600 fw-bold fs-7 mt-3">
						Date and Time of trip can be changed durinng assigment process in the next step in accordance to avalability space.
					</span>


				</div>

			</div>




			</div>
		


	</div>




	</div>
