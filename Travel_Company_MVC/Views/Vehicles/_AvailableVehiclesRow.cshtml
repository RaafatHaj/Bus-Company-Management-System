@using Newtonsoft.Json
@using System.Globalization
@model AvailableTripVehicleDTO;



<tr>

	@{



		// var data = new VehicleAvalibilityViewModel();

		// data.VehicleId = Model.VehicleId;
		// data.VehicleModel = Model.VehicleModel;
		// data.VehicleNumber = Model.VehicleNumber;
		// data.AvalibilityStartDateTime = Model.AvailibiltyStartDateTime;
		// data.AvalibilityEndDateTime = Model.AvailibiltyEndDateTime;
		// data.TripId = Convert.ToInt32(TempData["TripId"]);

		// data.MainTripDateTime = Convert.ToDateTime(TempData["TripDateAndTime"]);

		// if (TempData["ReturnTripDateTime"] != null && DateTime.TryParse(TempData["ReturnTripDateTime"]!.ToString(), out var returnTripDate))
		// {
		// 	data.ReturnTripDateTime = returnTripDate;
		// }
		// else
		// {
		// 	data.ReturnTripDateTime = null;
		// }


		var data=new VehicleDetailsViewModel();


		data.VehicleId = Model.VehicleId;
		data.VehicleModel = Model.VehicleModel;
		data.VehicleNumber = Model.VehicleNumber;
		data.Seats = Model.Seats;
		data.HomeStation = "Damascuse";

		if (int.TryParse(TempData["TripId"]?.ToString(), out var tripId))
		{
			data.TripId = tripId;
		}

		var jsonData = JsonConvert.SerializeObject(data);


	}


	<td>

		<div class="flex-grow-1 me-2">
			<a href="#" class="text-gray-900 fw-bold d-block text-hover-primary js-next-page-ajax"
			   data-url="/Vehicles/GetVehicleDetails"
			   data-json-data="@jsonData"
			   data-callback-4="@("test")">
			   @Model.VehicleNumber</a>
			<span class="text-gray-500 fs-7 fw-semibold ">@Model.VehicleModel</span>
		</div>

	</td>


	<td>

		<span class="text-gray-900 fw-bold d-block ">
			@(Model.Seats)
		</span>

		<span class="text-muted fw-semibold ">
			Seat
		</span>


	</td>


	<td>

			<div>

				<div class="d-flex gap-2">

					<span class="text-gray-900 fw-bold d-block testtt">
						@Model.AvailibiltyStartDateTime.ToString("HH:mm")
						<span class="text-muted fw-semibold fs-7">
							@(Model.AvailibiltyStartDateTime.TimeOfDay > new TimeSpan(12, 0, 0) ? "Pm" : "Am")
						</span>
					</span>
					<span class="text-primary">@Model.AvailibiltyStartDateTime.ToString("ddd")</span>


				</div>

				<div class="text-muted fw-semibold fs-7 ">
					<span class="text-primary">
						@Model.AvailibiltyStartDateTime.ToString("dd")
					</span>
					@Model.AvailibiltyStartDateTime.ToString("MMM")
					@Model.AvailibiltyStartDateTime.ToString("yyyy").
				</div>
			</div>

		

		



    </td>
	<td>
		
	
			<i class="ki-duotone ki-black-right fs-1">
			</i>
	
	
	</td>
	<td>

		<div>

			<div class="d-flex gap-2">

				<span class="text-gray-900 fw-bold d-block testtt">
					@Model.AvailibiltyEndDateTime.ToString("HH:mm")
					<span class="text-muted fw-semibold fs-7">
						@(Model.AvailibiltyEndDateTime.TimeOfDay > new TimeSpan(12, 0, 0) ? "Pm" : "Am")
					</span>
				</span>
				<span class="text-primary">@Model.AvailibiltyEndDateTime.ToString("ddd")</span>


			</div>

			<div class="text-muted fw-semibold fs-7 ">
				<span class="text-primary">
					@Model.AvailibiltyEndDateTime.ToString("dd")
				</span>
				@Model.AvailibiltyEndDateTime.ToString("MMM")
				@Model.AvailibiltyEndDateTime.ToString("yyyy").
			</div>
		</div>
	</td>

	<td>

		<span class="text-gray-900 fw-bold d-block ">
			@(Model.HomeStation)
			</span>

		<span class="text-muted fw-semibold ">
			Home Station
		</span>

		
	</td>
	<td>


		<!--Not : class to move tho assigning page => js-next-page-ajax -->

		<a href="#" class="btn btn-sm btn-light   js-select-vehicle"
		   data-url="/Vehicles/GetVehicleDetails"
		   data-json-data="@jsonData"
		   data-callback-4="@("test")">
			<i class="ki-solid ki-plus     "></i>Select
		</a>


	</td>
</tr>